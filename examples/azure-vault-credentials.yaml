version: "1.0"

# Docker image to deploy
image: "my-app:latest"

# HashiCorp Vault configuration
vault:
  address: "http://127.0.0.1:8200"
  auth:
    method: token
    token: "${VAULT_TOKEN}"

# Azure Provider - credentials loaded from Vault!
provider:
  name: azure
  region: eastus
  subscription_id: "5da361c8-69ba-40a0-8fae-4b9bd9044dbd"
  resource_group: "vault-demo-rg"

  # Tell cloud-deploy to load Azure credentials from Vault
  credentials:
    source: vault  # Load Azure service principal from Vault!

# Application secrets from Vault
secrets:
  - name: DATABASE_URL
    vault_path: secret/data/myapp/database
    vault_key: url

# Regular environment variables
environment_variables:
  ENV: production
  LOG_LEVEL: info

application:
  name: vault-azure-demo
  description: "Demo using Vault for Azure credentials"

environment:
  name: vault-azure-env

azure:
  container_resources:
    cpu: 1.0
    memory_in_gb: 1.5
  port: 8080
