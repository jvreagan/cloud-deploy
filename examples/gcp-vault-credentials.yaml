version: "1.0"

# Docker image to deploy
image: "my-app:latest"

# HashiCorp Vault configuration
vault:
  address: "http://127.0.0.1:8200"
  auth:
    method: token
    token: "${VAULT_TOKEN}"

# GCP Provider - credentials loaded from Vault!
provider:
  name: gcp
  region: us-central1
  project_id: turing-variety-476504-v4
  billing_account_id: "YOUR_BILLING_ACCOUNT_ID"

  # Tell cloud-deploy to load GCP credentials from Vault
  credentials:
    source: vault  # Load GCP service account from Vault!

# Application secrets from Vault
secrets:
  - name: DATABASE_URL
    vault_path: secret/data/myapp/database
    vault_key: url

# Regular environment variables
environment_variables:
  ENV: production
  LOG_LEVEL: info

application:
  name: vault-gcp-demo
  description: "Demo using Vault for GCP credentials"

environment:
  name: vault-gcp-env

health_check:
  path: /health
